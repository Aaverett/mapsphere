<!DOCTYPE html>
<html>
<head>
    <title></title>

    <!-- The JQuery UI stylesheet -->
    <link rel="Stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.10.3.custom.css" />

    <script language="javascript" type="text/javascript" src="js/libs/JQuery/jquery-1.10.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/libs/JQuery/jquery-ui-1.10.3.custom.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/libs/JQuery/jquery.mousewheel.js"></script>
    <script language="javascript" type="text/javascript" src="js/libs/ThreeJS/three.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/libs/MapSphere/MapSphere.js"></script>

    <script language="javascript" type="text/javascript">
        var map, layer, ms;

        function doInit() {
            var options = { doTestGeometry: false};

            ms = new MapSphere.MapSphere($("#map"), options);

            var stdOptions = {
                texturePath: "assets/bluemarble.jpg"
            };

            var stdOptions2 = {
                texturePath: "assets/testmpa.png"
            };

            var std1 = new MapSphere.Decorations.StaticTextureDecoration(stdOptions);
            var std2 = new MapSphere.Decorations.StaticTextureDecoration(stdOptions2);

            if (std1 == std2)
            {
                alert("what the hell?");
            }

            var belLayerOpts = {
                decorations: [std1, std2]
            };

            var basicEllipsoidLayer = new MapSphere.Layers.BasicEllipsoidLayer(belLayerOpts);

            ms.addLayer(basicEllipsoidLayer);

        }

        //Run the initialization routine 
        $(document).ready(doInit);

    </script>
    <script id="vertex_shader" type="x-shader/x-vertex">
        
    </script>

    <script id="fragment_shader" type="x-shader/x-fragment">
        uniform sampler2D texture0;
        uniform sampler2D texture1;

        varying vec2 vUv;
        varying vec3 vNormal;
        varying vec3 vViewPosition;

        void main() {

        vec4 tColor = texture2D( texture0, vUv );
        vec4 tColor2 = texture2D( texture1, vUv );

        // hack in a fake pointlight at camera location, plus ambient
        vec3 normal = normalize( vNormal );
        vec3 lightDir = normalize( vViewPosition );

        float dotProduct = max( dot( normal, lightDir ), 0.0 ) + 0.2;

        gl_FragColor = vec4( mix( tColor.rgb, tColor2.rgb, tColor2.a ), 1.0 ) * dotProduct;

        }
    </script>
</head>
<body>
    <h1>MapSphere Test Page</h1>
    <p>This demonstrates a simple MapSphere scene.</p>
    <div id="map" style="width: 1024px; height: 768px; border: 1px solid black;"></div>
    <span id="outspan"></span>
    <span id="outspan2"></span>
</body>
</html>
